<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Car Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸš˜

        
    </text></svg>">
    <% if (typeof currentPage === 'undefined') { %>
        <title>VoyagerAI â€“ Smart Vehicle Matching</title>
    <% } else { %>
        <title>VoyagerAI - <%= toTitleCase(currentPage) %></title>
    <% } %>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Styles -->
    <% if (typeof defaultStyles !== 'undefined' && defaultStyles) { %>
        <link rel="stylesheet" href="/css/style.css" />
    <% } %>

    <% if (currentPage === 'payment') { %>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <% } %>

    <% if (typeof extraStyles !== 'undefined' && extraStyles) { %>
        <link rel="stylesheet" href="<%= extraStyles %>" />
    <% } %>

</head>

<body>
    <header class="modern-header">
        <div class="header-container">
            <nav class="modern-navbar">
                <div class="nav-brand">
                    <a href="/" class="brand-link">
                        <div class="brand-icon">
                            <i class="fas fa-car-side"></i>
                        </div>
                        <span class="brand-text">VoyagerAI</span>
                    </a>
                </div>
                
                <div class="nav-menu" id="nav-menu">
                    <ul class="nav-links">
                        <li class="nav-item">
                            <a href="/" class="nav-link <%= currentPage === 'home' ? 'active' : '' %>">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/rentals/browse" class="nav-link <%= currentPage === 'browse' ? 'active' : '' %>">
                                <i class="fas fa-search"></i>
                                <span>Browse Cars</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/rentals" class="nav-link <%= currentPage === 'rentals' ? 'active' : '' %>">
                                <i class="fas fa-key"></i>
                                <span>My Rentals</span>
                            </a>
                        </li>
                    </ul>
                    
                    <div class="nav-auth">
                        <%if(!user) {%>
                            <a href="/users/login" class="auth-link login <%= currentPage === 'login' ? 'active' : '' %>">
                                <i class="fas fa-sign-in-alt"></i>
                                <span>Login</span>
                            </a>
                            <a href="/users/signup" class="auth-link signup <%= currentPage === 'signup' ? 'active' : '' %>">
                                <i class="fas fa-user-plus"></i>
                                <span>Sign Up</span>
                            </a>
                        <%} else {%>
                            <a href="/users/profile" class="auth-link profile <%= currentPage === 'profile' ? 'active' : '' %>">
                                <i class="fas fa-user-circle"></i>
                                <span>Profile</span>
                            </a>
                            <a href="/users/logout" class="auth-link logout">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </a>
                        <%} %>
                    </div>
                </div>
                
                <div class="nav-toggle" id="nav-toggle">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </div>
            </nav>
        </div>
    </header>

    <main>
      <%if(errorMessages.length >0) {
          errorMessages.forEach(message => { %>
              <div class="error"> <%=message%> </div>
          <%})
      }%>
      <%if(successMessages.length >0) {
          successMessages.forEach(message => { %>
              <div class="success"> <%=message%> </div>
          <%})
      }%>
      <%if(warningMessages && warningMessages.length >0) {
          warningMessages.forEach(message => { %>
              <div class="warning"> <%=message%> </div>
          <%})
      }%>
      <%if(loginRequiredMessages && loginRequiredMessages.length >0) {
          loginRequiredMessages.forEach(message => { %>
              <div class="error login-required"> <%=message%> </div>
          <%})
      }%>
      <%if(infoMessages && infoMessages.length >0) {
          infoMessages.forEach(message => { %>
              <div class="info"> <%=message%> </div>
          <%})
      }%>

    <script>
        // Mobile Navigation Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.getElementById('nav-toggle');
            const navMenu = document.getElementById('nav-menu');
            
            if (navToggle && navMenu) {
                navToggle.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                    navToggle.classList.toggle('active');
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(event) {
                    if (!navToggle.contains(event.target) && !navMenu.contains(event.target)) {
                        navMenu.classList.remove('active');
                        navToggle.classList.remove('active');
                    }
                });
                
                // Close menu when clicking on a link
                const navLinks = navMenu.querySelectorAll('.nav-link, .auth-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        navMenu.classList.remove('active');
                        navToggle.classList.remove('active');
                    });
                });
            }
        });
    </script>
